<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TWaver HTML5</title>
  <script src="../../lib/twaver.js"></script>
  <script src="CElement.js"></script>
  <script>
    function init() {
      var box = new twaver.ElementBox();
      var network = new twaver.canvas.Network(box);
      // network.setLinkFlowEnabled(true);
      
      document.body.appendChild(network.getView());
      network.adjustBounds({ x: 0, y: 0, width: 500, height: 500 });
      
      var node1 = new twaver.Node();
      node1.setName('TWaver');
      node1.setLocation(100, 100);
      box.add(node1);
      
      var node2 = new twaver.Node();
      node2.setName('HTML5');
      node2.setLocation(300, 200);
      box.add(node2);
      
      var link = new CLinkX(node1, node2);
      // link.setName('Hello!');
      // link.setToolTip('<b>Hello!</b>');
        link.setClient('link.flows', true);
        link.setClient('link.flow.converse',true);
        link.setStyle('link.pattern', [20, 20]);
        link.setClient('link.flow.color', 'red');
        link.setStyle('link.color', 'yellow');
        link.setClient("link.flow.offset",3);
        link.setStyle('link.type','orthogonal');
        // link.setStyle('vector.outline.color', '#FFFFFF');
      box.add(link);

      // box.remove(link);
      // console.log("boxsize "+box.size());
      // link.setFromNode(node1);
      // link.setToNode(node2);

      // box.add(link);
      // console.log("boxsize "+box.size());
      // 
      // 
      
      var _flowLink = function () {
        var originFlowOffset= link.getClient("link.flow.offset");
        link.setClient("link.flow.offset",originFlowOffset+3);
        // link._styleMap["link.flow.offset"] = network.getLinkFlowOffset(link);
        network.invalidateElementUI(link);
      };
      setInterval(_flowLink, 600);
      // _flowLink();

    }
  </script>
</head>
<body onload="init()">
</body>
</html>